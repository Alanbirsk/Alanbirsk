<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Dashboard Implantações • 2025</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script>

<linkinedo<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<style>
body{
  margin:0;
  padding:16px;
  background:#020617;
  color:#e5e7eb;
  font-family:Inter,sans-serif;
  font-size:13px;
}
h1{
  text-align:center;
  font-size:20px;
  margin-bottom:14px;
}
.filters,.kpis{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(160px,1fr));
  gap:10px;
  margin-bottom:14px;
}
select{
  padding:6px;
  background:#020617;
  color:#fff;
  border:1px solid #1f2933;
  border-radius:8px;
}
.kpi{
  border:1px solid #1f2933;
  border-radius:12px;
  padding:10px;
}
.kpi h3{
  font-size:10px;
  color:#9ca3af;
  margin:0;
}
.kpi span{
  font-size:17px;
  font-weight:700;
}
.grid{
  display:grid;
  grid-template-columns:2fr 1fr;
  gap:14px;
}
.card{
  border:1px solid #1f2933;
  border-radius:14px;
  padding:12px;
}
canvas{max-height:180px}
table{
  width:100%;
  border-collapse:collapse;
  font-size:12px;
}
th,td{
  padding:6px;
  border-bottom:1px solid #1f2933;
}
th{color:#9ca3af;font-size:11px}
td:last-child{text-align:right}
</style>
</head>

<body>

<h1>Implantações & Comissão • 2025</h1>

<div class="filters">
  <select id="consultorFilter"><option value="all">Todos os Consultores</option></select>
  <select id="mesInicio"></select>
  <select id="mesFim"></select>
</div>

<div class="kpis">
  <div class="kpi"><h3>Total Implantações</h3><span id="kpiQtd">0</span></div>
  <div class="kpi"><h3>Total Comissão</h3><span id="kpiValor">R$ 0</span></div>
  <div class="kpi"><h3>Top Implantações</h3><span id="kpiTopQtd">-</span></div>
  <div class="kpi"><h3>Top Comissão</h3><span id="kpiTopValor">-</span></div>
</div>

<div class="grid">
  <div>
    <div class="card"><canvas id="graficoQtd"></canvas></div>
    <div class="card"><canvas id="graficoValor"></canvas></div>
  </div>

  <div class="card">
    <h3>Ranking do Período</h3>
    <table>
      <thead>
        <tr><th>Consultor</th><th>Implantações</th><th>Comissão</th></tr>
      </thead>
      <tbody id="ranking"></tbody>
    </table>
  </div>
</div>

<script>
Chart.register(ChartDataLabels);

const meses=['Jan','Fev','Mar','Abr','Mai','Jun','Jul','Ago','Set','Out','Nov','Dez'];
const consultores=['Vitor','Carlos','Kaio','Jose','Lucas','Paulo'];

const qtd=[
 [3,0,5,6,2,0],[5,3,1,2,2,0],[3,4,2,1,5,0],[9,5,1,5,4,0],
 [3,5,0,3,11,0],[8,5,0,6,8,0],[6,5,0,9,4,0],[7,8,1,7,9,0],
 [6,5,3,9,7,0],[10,11,6,2,4,0],[8,0,2,4,6,0],[21,3,3,4,7,7]
];

const valor=[
 [220.96,0,1992.60,410.47,260.64,0],[579.28,486.96,213.44,535.20,190.72,0],
 [328.48,288.43,544.42,56.72,753.20,0],[2358.11,862.96,1249.50,241.92,746.74,0],
 [644.61,585.20,0,379.09,1025.37,0],[836.80,531.36,0,385.20,935.44,0],
 [526.40,643.52,0,1108.48,614.50,0],[898.80,1198.40,356.25,1444.42,638.08,0],
 [1421.74,504.52,798.97,993.10,1370.41,0],[1077.94,880.40,1186.20,310.48,491.12,0],
 [2057.28,0,890.00,360.86,690.29,0],[1430.78,302.40,795.53,322.56,804.19,0]
];

consultores.forEach((c,i)=>consultorFilter.innerHTML+=`<option value="${i}">${c}</option>`);
meses.forEach((m,i)=>{
  mesInicio.innerHTML+=`<option value="${i}">${m}</option>`;
  mesFim.innerHTML+=`<option value="${i}">${m}</option>`;
});
mesFim.value=11;

const gQtd=new Chart(graficoQtd,{
  type:'bar',
  data:{labels:[],datasets:[]},
  options:{
    plugins:{
      legend:{display:false},
      title:{display:true,text:'Implantações Finalizadas (Qtd)'},
      datalabels:{
        color:'#e5e7eb',
        anchor:'end',
        align:'top',
        font:{weight:'bold',size:11}
      }
    }
  }
});

const gValor=new Chart(graficoValor,{
  type:'bar',
  data:{labels:[],datasets:[]},
  options:{
    plugins:{
      legend:{display:false},
      title:{display:true,text:'Comissão Paga (R$)'},
      datalabels:{
        color:'#e5e7eb',
        anchor:'end',
        align:'top',
        formatter:v=>'R$ '+v.toLocaleString('pt-BR',{minimumFractionDigits:0}),
        font:{weight:'bold',size:10}
      }
    },
    scales:{y:{ticks:{callback:v=>'R$ '+v.toLocaleString('pt-BR')}}}
  }
});

function atualizar(){
  const ini=+mesInicio.value,fim=+mesFim.value;
  let labels=[],dq=[],dv=[],rank=[];

  consultores.forEach((c,i)=>{
    let tq=0,tv=0;
    for(let m=ini;m<=fim;m++){tq+=qtd[m][i];tv+=valor[m][i]}
    rank.push({c,tq,tv});
  });

  rank.sort((a,b)=>b.tq-a.tq);
  ranking.innerHTML=rank.map(r=>`
    <tr><td>${r.c}</td><td><b>${r.tq}</b></td><td>R$ ${r.tv.toLocaleString('pt-BR',{minimumFractionDigits:2})}</td></tr>
  `).join('');

  for(let m=ini;m<=fim;m++){
    labels.push(meses[m]);
    dq.push(qtd[m].reduce((a,b)=>a+b,0));
    dv.push(valor[m].reduce((a,b)=>a+b,0));
  }

  kpiQtd.innerText=dq.reduce((a,b)=>a+b,0);
  kpiValor.innerText='R$ '+dv.reduce((a,b)=>a+b,0).toLocaleString('pt-BR',{minimumFractionDigits:2});
  kpiTopQtd.innerText=rank[0].c;
  kpiTopValor.innerText=[...rank].sort((a,b)=>b.tv-a.tv)[0].c;

  gQtd.data={labels,datasets:[{data:dq,backgroundColor:'#22c55e'}]};
  gValor.data={labels,datasets:[{data:dv,backgroundColor:'#3b82f6'}]};
  gQtd.update();gValor.update();
}

document.querySelectorAll('select').forEach(s=>s.onchange=atualizar);
atualizar();
</script>

</body>
</html>
