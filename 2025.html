<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Dashboard Implantações 2025</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body{
  margin:0;
  background:#020617;
  color:#fff;
  font-family:Arial,Helvetica,sans-serif;
}
.container{
  max-width:1250px;
  margin:auto;
  padding:20px;
}
.filters{
  display:flex;
  flex-wrap:wrap;
  gap:12px;
  margin-bottom:15px;
}
select,label{
  background:#020617;
  color:#fff;
  border:1px solid #1e293b;
  border-radius:8px;
  padding:6px 10px;
}
label{font-size:13px;display:flex;gap:6px;align-items:center}
.cards{
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:12px;
  margin-bottom:12px;
}
.card{
  background:#020617;
  border:1px solid #1e293b;
  border-radius:12px;
  padding:14px;
}
.card span{font-size:12px;color:#94a3b8}
.card strong{font-size:18px}
.story{
  border:1px solid #1e293b;
  border-radius:12px;
  padding:12px;
  margin-bottom:18px;
  font-size:14px;
}
table{
  width:100%;
  border-collapse:collapse;
  font-size:13px;
}
th,td{
  border-bottom:1px solid #1e293b;
  padding:8px;
  text-align:right;
}
th{text-align:left;color:#94a3b8}
td:first-child{text-align:left}
canvas{margin-bottom:30px}
</style>
</head>

<body>
<div class="container">
<h1>Dashboard de Implantações – 2025</h1>

<div class="filters">
<select id="mesIni"></select>
<select id="mesFim"></select>
<label><input type="checkbox" checked value="Vitor">Vitor</label>
<label><input type="checkbox" checked value="Carlos">Carlos</label>
<label><input type="checkbox" checked value="Kaio">Kaio</label>
<label><input type="checkbox" checked value="Jose">Jose</label>
<label><input type="checkbox" checked value="Lucas">Lucas</label>
<label><input type="checkbox" checked value="Paulo">Paulo</label>
</div>

<div class="cards">
<div class="card"><span>Total Implantações</span><strong id="cImpl">0</strong></div>
<div class="card"><span>Comissão Total</span><strong id="cVal">R$ 0</strong></div>
<div class="card"><span>Líder Volume</span><strong id="cLidQ">-</strong></div>
<div class="card"><span>Líder Comissão</span><strong id="cLidV">-</strong></div>
</div>

<div class="story" id="story"></div>

<canvas id="gQtd" height="110"></canvas>
<canvas id="gVal" height="110"></canvas>

<h3>Ranking do Período</h3>
<table>
<thead>
<tr>
<th>Consultor</th>
<th>Implantações</th>
<th>Comissão (R$)</th>
</tr>
</thead>
<tbody id="rankTable"></tbody>
</table>
</div>

<script>
const meses=["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"];

const dados={
 Vitor:{q:[3,5,3,9,3,8,6,7,6,10,8,21],v:[220.96,579.28,328.48,2358.11,644.61,836.80,526.40,898.80,1421.74,1077.94,2057.28,1410.56]},
 Carlos:{q:[0,3,4,5,5,5,5,8,5,11,0,3],v:[0,486.96,288.43,862.96,585.20,531.36,643.52,1198.40,504.52,880.40,0,422.40]},
 Kaio:{q:[5,1,2,1,0,0,0,1,3,6,2,7],v:[1992.60,213.44,544.42,1249.50,0,0,0,356.25,798.97,1186.20,890.00,750.56]},
 Jose:{q:[6,2,1,5,3,6,9,7,9,2,4,4],v:[410.47,535.20,56.72,241.92,379.09,385.20,1108.48,1444.42,993.10,310.48,360.86,322.56]},
 Lucas:{q:[2,2,5,4,11,8,4,9,7,4,6,11],v:[260.64,190.72,753.20,746.74,1025.37,935.44,614.50,638.08,1370.41,491.12,690.29,1056.19]},
 Paulo:{q:[0,0,0,0,0,0,0,0,0,0,0,11],v:[0,0,0,0,0,0,0,0,0,0,0,818.10]}
};

const colors={Vitor:"#22c55e",Carlos:"#4ade80",Kaio:"#16a34a",Jose:"#15803d",Lucas:"#86efac",Paulo:"#bbf7d0"};

const selIni=document.getElementById("mesIni");
const selFim=document.getElementById("mesFim");
meses.forEach((m,i)=>{
 selIni.innerHTML+=`<option value="${i}">${m}</option>`;
 selFim.innerHTML+=`<option value="${i}">${m}</option>`;
});
selFim.value=11;

const gQtdEl=document.getElementById("gQtd");
const gValEl=document.getElementById("gVal");
let gQtd,gVal;

function atualizar(){
 const ini=+selIni.value,fim=+selFim.value;
 const ativos=[...document.querySelectorAll("input:checked")].map(e=>e.value);
 let totalQ=0,totalV=0,rank=[],dsQ=[],dsV=[];
 ativos.forEach(c=>{
  const q=dados[c].q.slice(ini,fim+1);
  const v=dados[c].v.slice(ini,fim+1);
  const tq=q.reduce((a,b)=>a+b,0);
  const tv=v.reduce((a,b)=>a+b,0);
  totalQ+=tq; totalV+=tv;
  rank.push({c,tq,tv});
  dsQ.push({label:c,data:q,backgroundColor:colors[c]});
  dsV.push({label:c,data:v,backgroundColor:colors[c]});
 });
 rank.sort((a,b)=>b.tq-a.tq);
 document.getElementById("cImpl").innerText=totalQ;
 document.getElementById("cVal").innerText="R$ "+totalV.toLocaleString("pt-BR",{minimumFractionDigits:2});
 document.getElementById("cLidQ").innerText=rank[0]?.c||"-";
 document.getElementById("cLidV").innerText=[...rank].sort((a,b)=>b.tv-a.tv)[0]?.c||"-";
 document.getElementById("story").innerHTML=`Período ${meses[ini]} → ${meses[fim]}: <b>${totalQ}</b> implantações.`;
 const tb=document.getElementById("rankTable"); tb.innerHTML="";
 rank.forEach(r=>tb.innerHTML+=`<tr><td>${r.c}</td><td>${r.tq}</td><td>R$ ${r.tv.toLocaleString("pt-BR",{minimumFractionDigits:2})}</td></tr>`);
 gQtd?.destroy(); gVal?.destroy();
 gQtd=new Chart(gQtdEl,{type:"bar",data:{labels:meses.slice(ini,fim+1),datasets:dsQ},options:{plugins:{legend:{labels:{color:"#fff"}}}}});
 gVal=new Chart(gValEl,{type:"bar",data:{labels:meses.slice(ini,fim+1),datasets:dsV},options:{plugins:{legend:{labels:{color:"#fff"}}}}});
}

document.querySelectorAll("select,input").forEach(e=>e.addEventListener("change",atualizar));
atualizar();
</script>
</body>
</html>
